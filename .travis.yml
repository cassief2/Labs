# .travis.yml

# This script is used for testing using Travis
# It is intended to work on their VM set up: Ubuntu 12.04 LTS
# A minimal current TL is installed adding only the packages that are
# required

language: python

python:
  - 2.7

env:
  # - PATH: /opt/texbin:/usr/local/texlive/2016/bin/x86_64-linux:$PATH
  - PATH: /tmp/texlive/bin/x86_64-linux:$PATH

before_install:
  - python travis_pre.py

#!/usr/bin/env sh

install: # Download and install a vanilla TexLive
  - wget http://mirror.ctan.org/systems/texlive/tlnet/install-tl-unx.tar.gz
  - tar -xzf install-tl-unx.tar.gz # -C ./temp_texlive # --strip-components=1
  - cd install-tl-20*
  - pwd
  - ls -alS
  - sudo ./install-tl -profile=../.nmc.profile
  - ls -R /usr/local/texlive
  # - sudo /usr/local/texlive/2017/bin/x86_64-linux/tlmgr update --self --all --no-auto-install
  # - sudo /usr/local/texlive/2014/bin/x86_64-linux/tlmgr update --self
  # - sudo /usr/local/texlive/2014/bin/x86_64-linux/tlmgr update --all
  # - sudo /usr/local/texlive/2014/bin/x86_64-linux/tlmgr install iftex
  # - sudo /usr/local/texlive/2014/bin/x86_64-linux/texhash
  - cd ../
  - pwd
  - ls -alS
  # - tlmgr update --self --all --no-auto-install

script:
  - pdflatex Vol1.tex
  - pdflatex Vol2.tex
  - pdflatex Vol3.tex
  - pdflatex Vol4.tex
  - pdflatex ExtraLabs.tex
  - pdflatex InstructorNotes.tex
  - python travis_post.py


# Other contrib packages: done as a block to avoid multiple calls to tlmgr
# Dependencies other than the core l3build set up, metafont, fontspec and the
# 'graphics stack' (itself needed by fontspec) are listed below
# tlmgr install --no-depends \
#   chemformula \
#   ctex        \
#   mhchem      \
#   siunitx     \
#   unicode-math
# tlmgr install --no-depends cjk
# tlmgr install   \
#   adobemapping  \
#   amsfonts      \
#   amsmath       \
#   chemgreek     \
#   cjkpunct      \
#   ctablestack   \
#   ec            \
#   environ       \
#   etoolbox      \
#   fandol        \
#   filehook      \
#   ifxetex       \
#   lm-math       \
#   lualatex-math \
#   luatexbase    \
#   luatexja      \
#   ms            \
#   pgf           \
#   tools         \
#   trimspaces    \
#   ucharcat      \
#   ulem          \
#   units         \
#   xcolor        \
#   xecjk         \
#   xunicode      \
#   zhmetrics     \
#   zhnumber


